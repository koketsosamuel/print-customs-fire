<section class="container mt-4">
  <h1>Customize: {{ product?.name }}</h1>
  <div class="row">
    <div class="col-md-6 col-lg-3 col-sm-8">
      <app-color-variant-selector
        *ngIf="product?.variations?.options?.length"
        [options]="product.variations.options"
        [selectedVariantIndex]="selectedVariantIndex"
        [readonly]="true"
      ></app-color-variant-selector>
    </div>
    <div class="col-lg-3 col-md-4 mb-4" *ngIf="totalPrice > 0">
      <mat-card class="rounded-corners h-100">
        <mat-card-content class="bg-teal-100 rounded-corners h-100 d-flex align-items-center">
          <h2 class="fg-green-700">
            Cost so far: <b>R {{ totalPrice }}</b>
          </h2>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <mat-stepper #stepper [linear]="true">
    <mat-step label="Quantities">
      <app-product-quantities
        (quantityChanged)="setQuantities($event)"
        [product]="product"
        [totalQuantity]="totalQuantity"
        [chosenVariationIndex]="selectedVariantIndex"
        *ngIf="!!product"
      ></app-product-quantities>
    </mat-step>
    <mat-step label="Printing Locations" *ngIf="product?.name">
      <app-select-customization-positions
        (change)="setPrintingLocations($event)"
        [availableLocations]="product.printingPositions"
      ></app-select-customization-positions>
    </mat-step>
    <mat-step label="Printing Methods">
      <app-select-custom-printing-methods
        *ngIf="printingPositionsSelected.length > 0"
        [product]="product"
        [printingPositions]="printingPositionsSelected"
        (change)="setPrintingInfo($event)"
      ></app-select-custom-printing-methods>
    </mat-step>

    <mat-step label="Upload Artwork">
      <app-upload-artwork
        *ngIf="printingInfo.length > 0"
        [printingInfo]="printingInfo"
        (change)="setPrintingInfoArtwork($event)"
      ></app-upload-artwork>
    </mat-step>
    <mat-step label="Confirm">
      <app-cost-breakdown [costBreakdown]="costBreakdown"></app-cost-breakdown>
    </mat-step>
  </mat-stepper>
</section>
